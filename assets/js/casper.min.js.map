{"version":3,"sources":["casper.js"],"names":["$","loadFiles","js","css","click","addClass","removeClass","window","location","hash","checkExist","setInterval","length","animate","scrollTop","offset","top","clearInterval","loadScript","fileName","callback","into","script","document","createElement","type","src","onload","push","getElementsByTagName","appendChild","body","loadCSS","rel","onreadystatechange","href","ready","returnTop","scroll","this","fadeIn","fadeOut","bp","curProtocol","protocol","split","bdPush","parentNode","insertBefore","hm","bdhmt","getElementById","Valine","el","appId","appKey","notify","verify","avatar","visitor","highlight","recordIP","placeholder","mediumZoom","querySelectorAll","attr","i","clazz","undefined","replace","Prism","plugins","autoloader","languages_path","highlightAll","GhostSearch","key","host","focus","blur","on","event","link","target","hostname","test","preventDefault","open","console","log","jQuery"],"mappings":"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","file":"casper.min.js","sourcesContent":["(function ($) {\n  var loadFiles = {\n    js: [],\n    css: []\n  };\n\n  /**\n   * 打开捐赠弹窗\n   */\n  $('#btn-modal').click(function () {\n    $('#overlay').addClass('is-visible');\n    $('#modal').addClass('is-visible animated fadeInDown').removeClass('fadeOutDown');\n    $('html').css('overflow-y', 'hidden');\n  });\n  /**\n   * 关闭捐赠弹窗\n   */\n  $('#close-btn').click(function () {\n    $('#overlay').removeClass('is-visible');\n    $('#modal').removeClass('is-visible animated fadeInDown').addClass('animated fadeOutDown');\n    $('html').css('overflow-y', 'scroll');\n  });\n  $('#overlay').click(function () {\n    $('#overlay').removeClass('is-visible');\n    $('#modal').removeClass('is-visible animated fadeInDown').addClass('animated fadeOutDown');\n    $('html').css('overflow-y', 'scroll');\n  });\n\n  /**\n   * 评论跳转\n   */\n  if (window.location.hash) {\n    var checkExist = setInterval(function () {\n      if ($(window.location.hash).length) {\n        $('html, body').animate(\n          {scrollTop: $(window.location.hash).offset().top - 90},\n          1000\n        );\n        clearInterval(checkExist);\n      }\n    }, 100);\n  }\n\n  /**\n   * 时间转换\n   * @param timestamp\n   * @returns {string}\n   */\n  function timestampFormat(timestamp) {\n    timestamp = Date.parse(timestamp) / 1000;\n\n    function zeroize(num) {\n      return (String(num).length === 1 ? '0' : '') + num;\n    }\n\n    var curTimestamp = parseInt(new Date().getTime() / 1000); //当前时间戳\n    var timestampDiff = curTimestamp - timestamp; // 参数时间戳与当前时间戳相差秒数\n    var curDate = new Date(curTimestamp * 1000); // 当前时间日期对象\n    var tmDate = new Date(timestamp * 1000); // 参数时间戳转换成的日期对象\n    var Y = tmDate.getFullYear(),\n      m = tmDate.getMonth() + 1,\n      d = tmDate.getDate();\n    var H = tmDate.getHours(),\n      i = tmDate.getMinutes(),\n      s = tmDate.getSeconds();\n    if (timestampDiff < 60) {\n      // 一分钟以内\n      return '刚刚';\n    } else if (timestampDiff < 3600) {\n      // 一小时前之内\n      return Math.floor(timestampDiff / 60) + '分钟前';\n    } else if (\n      curDate.getFullYear() === Y &&\n      curDate.getMonth() + 1 === m &&\n      curDate.getDate() === d\n    ) {\n      return '今天' + zeroize(H) + ':' + zeroize(i);\n    } else {\n      var newDate = new Date((curTimestamp - 86400) * 1000); // 参数中的时间戳加一天转换成的日期对象\n      if (\n        newDate.getFullYear() === Y &&\n        newDate.getMonth() + 1 === m &&\n        newDate.getDate() === d\n      ) {\n        return '昨天' + zeroize(H) + ':' + zeroize(i);\n      } else if (curDate.getFullYear() === Y) {\n        return (\n          zeroize(m) + '月' + zeroize(d) + '日 ' + zeroize(H) + ':' + zeroize(i)\n        );\n      } else {\n        return (\n          Y +\n          '年' +\n          zeroize(m) +\n          '月' +\n          zeroize(d) +\n          '日 ' +\n          zeroize(H) +\n          ':' +\n          zeroize(i)\n        );\n      }\n    }\n  }\n\n  /**\n   * 动态加载JS文件的方法\n   * Load javascript file method\n   *\n   * @param {String}   fileName              JS文件名\n   * @param {Function} [callback=function()] 加载成功后执行的回调函数\n   * @param {String}   [into='head']         嵌入页面的位置\n   */\n  function loadScript(fileName, callback, into) {\n    into = into || 'body';\n    callback = callback || function () {\n    };\n    var script = null;\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = fileName;\n    script.onload = function () {\n      loadFiles.js.push(fileName);\n      callback();\n    };\n    if (into === 'head') {\n      document.getElementsByTagName('head')[0].appendChild(script);\n    } else {\n      document.body.appendChild(script);\n    }\n  }\n\n  /**\n   * 动态加载CSS文件的方法\n   * Load css file method\n   *\n   * @param {String}   fileName              CSS文件名\n   * @param {Function} [callback=function()] 加载成功后执行的回调函数\n   * @param {String}   [into='head']         嵌入页面的位置\n   */\n  function loadCSS(fileName, callback, into) {\n    into = into || 'head';\n    callback = callback || function () {\n    };\n\n    var css = document.createElement('link');\n    css.type = 'text/css';\n    css.rel = 'stylesheet';\n    css.onload = css.onreadystatechange = function () {\n      loadFiles.css.push(fileName);\n      callback();\n    };\n    css.href = fileName;\n    if (into === 'head') {\n      document.getElementsByTagName('head')[0].appendChild(css);\n    } else {\n      document.body.appendChild(css);\n    }\n  }\n\n  $(document).ready(function () {\n    /**\n     * 回到顶部\n     */\n    var returnTop = $('#return-to-top');\n    $(window).scroll(function () {\n      if ($(this).scrollTop() >= 50) {\n        returnTop.fadeIn(200);\n      } else {\n        returnTop.fadeOut(200);\n      }\n    });\n    returnTop.click(function () {\n      $('body,html').animate(\n        {\n          scrollTop: 0\n        },\n        500\n      );\n    });\n\n    //百度推送\n    var bp = document.createElement('script');\n    var curProtocol = window.location.protocol.split(':')[0];\n    if (curProtocol === 'https') {\n      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';\n    } else {\n      bp.src = 'http://push.zhanzhang.baidu.com/push.js';\n    }\n    var bdPush = document.getElementsByTagName('script')[0];\n    bdPush.parentNode.insertBefore(bp, bdPush);\n\n    //百度统计\n    var hm = document.createElement('script');\n    hm.src = 'https://hm.baidu.com/hm.js?37d3bf3116f041cb10bd1d890e65bcfc';\n    var bdhmt = document.getElementsByTagName('script')[0];\n    bdhmt.parentNode.insertBefore(hm, bdhmt);\n\n    //valine评论支持\n    loadScript('//cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js', function () {\n      loadScript(\n        'https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js',\n        function () {\n          if (document.getElementById('vcomments') !== null) {\n            new Valine({\n              el: '#vcomments',\n              appId: 'rEDT0uBB2LEdndoJ4od2SlKf-gzGzoHsz',\n              appKey: 'lmX57j7hrYGCHROA72tBUIXq',\n              notify: true,\n              verify: true,\n              avatar: 'mm',\n              visitor: true, // 文章访问量统计\n              highlight: true, // 代码高亮\n              recordIP: true, // 是否记录评论者IP\n              placeholder: '请您理智发言，共建美好社会！'\n            });\n          }\n        }\n      );\n    });\n    //图箱支持\n    loadScript('//cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js', function () {\n      mediumZoom(document.querySelectorAll('.post-full-content .post-content img'));\n    });\n    //Prism高亮支持\n    // loadCSS('//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism-tomorrow.min.css');\n    loadScript('//cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js', function () {\n      loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js', function () {\n          //将html代码块支持高亮\n          $('.post-content pre code').attr('class', function (i, clazz) {\n            if (clazz !== undefined) {\n              return clazz.replace(/language-html/g, 'language-markup');\n            }\n          });\n          //设置高亮语言样式文件地址\n          if (window.Prism !== 'undefined') {\n            Prism.plugins.autoloader.languages_path = '//cdn.jsdelivr.net/npm/prismjs/components/';\n            Prism.highlightAll();\n          }\n        }\n      );\n    });\n    //行号\n    loadCSS('//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css');\n    loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js');\n    //支持行号显示\n    $('.post-content pre').addClass('line-numbers');\n    //显示语言或者粘贴\n    loadCSS('//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css');\n    loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js');\n    loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js');\n    loadScript('//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js');\n    loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js');\n\n    // 配置搜索\n    var ghostSearch = new GhostSearch({\n      // key: '1c8b902ac09889962117d082e6',\n      // host: 'http://localhost:2368'\n      key: '99efee9603c92e5cd04501f069',\n      host: 'https://iiong.com'\n    });\n    // 搜索事件执行\n    $('#ghost-search-field').focus(function () {\n      $('#ghost-search-results').fadeIn(500);\n      $('.search-cover').fadeIn(500);\n      $('html').css('overflow-y', 'hidden')\n    }).blur(function () {\n      $('#ghost-search-results').fadeOut(500);\n      $('.search-cover').fadeOut(500);\n      $('html').css('overflow-y', 'scroll')\n    });\n\n    // 监听点击链接时间，非本站链接进行新标签打开\n    $(document).on(\"click\", 'a', function (event) {\n      var link = event.target.href; // 完整链接\n      var host = event.target.hostname;\n      if (/^https?:\\/\\/(([a-zA-Z0-9_-])+(\\.)?)*(:\\d+)?(\\/((\\.)?(\\?)?=?&?[a-zA-Z0-9_-](\\?)?)*)*$/i.test(link)) {\n        if (host !== window.location.hostname) {\n          event.preventDefault();\n          window.open(event.target.href)\n        }\n      }\n    });\n\n    console.log('已经动态加载资源：', loadFiles);\n  });\n})(jQuery);\n"]}