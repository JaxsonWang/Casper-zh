{"version":3,"sources":["casper.js"],"names":["$","loadFiles","js","css","click","addClass","removeClass","window","location","hash","checkExist","setInterval","length","animate","scrollTop","offset","top","clearInterval","loadScript","fileName","callback","into","script","document","createElement","id","replace","type","src","onload","push","getElementsByTagName","appendChild","body","loadCSS","rel","onreadystatechange","href","ready","returnTop","scroll","this","fadeIn","fadeOut","bp","curProtocol","protocol","split","bdPush","parentNode","insertBefore","hm","bdhmt","getElementById","Valine","av","AV","el","emoticon_url","emoticon_list","appId","appKey","notify","verify","avatar","placeholder","mediumZoom","querySelectorAll","attr","i","clazz","undefined","Prism","plugins","autoloader","languages_path","highlightAll","console","log","jQuery"],"mappings":"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","file":"casper.min.js","sourcesContent":["(function ($) {\n    var loadFiles = {\n        js: [],\n        css: []\n    };\n\n    /**\n     * 打开捐赠弹窗\n     */\n    $('#btn-modal').click(function () {\n        $('#overlay').addClass('is-visible');\n        $('#modal').addClass('is-visible');\n    });\n    /**\n     * 关闭捐赠弹窗\n     */\n    $('#close-btn').click(function () {\n        $('#overlay').removeClass('is-visible');\n        $('#modal').removeClass('is-visible');\n    });\n    $('#overlay').click(function () {\n        $('#overlay').removeClass('is-visible');\n        $('#modal').removeClass('is-visible');\n    });\n\n    /**\n     * 评论跳转\n     */\n    if (window.location.hash) {\n        var checkExist = setInterval(function () {\n            if ($(window.location.hash).length) {\n                $('html, body').animate(\n                    {scrollTop: $(window.location.hash).offset().top - 90},\n                    1000\n                );\n                clearInterval(checkExist);\n            }\n        }, 100);\n    }\n\n    /**\n     * 时间转换\n     * @param timestamp\n     * @returns {string}\n     */\n    function timestampFormat(timestamp) {\n        timestamp = Date.parse(timestamp) / 1000;\n\n        function zeroize(num) {\n            return (String(num).length === 1 ? '0' : '') + num;\n        }\n\n        var curTimestamp = parseInt(new Date().getTime() / 1000); //当前时间戳\n        var timestampDiff = curTimestamp - timestamp; // 参数时间戳与当前时间戳相差秒数\n        var curDate = new Date(curTimestamp * 1000); // 当前时间日期对象\n        var tmDate = new Date(timestamp * 1000); // 参数时间戳转换成的日期对象\n        var Y = tmDate.getFullYear(),\n            m = tmDate.getMonth() + 1,\n            d = tmDate.getDate();\n        var H = tmDate.getHours(),\n            i = tmDate.getMinutes(),\n            s = tmDate.getSeconds();\n        if (timestampDiff < 60) {\n            // 一分钟以内\n            return '刚刚';\n        } else if (timestampDiff < 3600) {\n            // 一小时前之内\n            return Math.floor(timestampDiff / 60) + '分钟前';\n        } else if (\n            curDate.getFullYear() === Y &&\n            curDate.getMonth() + 1 === m &&\n            curDate.getDate() === d\n        ) {\n            return '今天' + zeroize(H) + ':' + zeroize(i);\n        } else {\n            var newDate = new Date((curTimestamp - 86400) * 1000); // 参数中的时间戳加一天转换成的日期对象\n            if (\n                newDate.getFullYear() === Y &&\n                newDate.getMonth() + 1 === m &&\n                newDate.getDate() === d\n            ) {\n                return '昨天' + zeroize(H) + ':' + zeroize(i);\n            } else if (curDate.getFullYear() === Y) {\n                return (\n                    zeroize(m) + '月' + zeroize(d) + '日 ' + zeroize(H) + ':' + zeroize(i)\n                );\n            } else {\n                return (\n                    Y +\n                    '年' +\n                    zeroize(m) +\n                    '月' +\n                    zeroize(d) +\n                    '日 ' +\n                    zeroize(H) +\n                    ':' +\n                    zeroize(i)\n                );\n            }\n        }\n    }\n\n    /**\n     * 动态加载JS文件的方法\n     * Load javascript file method\n     *\n     * @param {String}   fileName              JS文件名\n     * @param {Function} [callback=function()] 加载成功后执行的回调函数\n     * @param {String}   [into='head']         嵌入页面的位置\n     */\n    function loadScript(fileName, callback, into) {\n        into = into || 'body';\n        callback = callback || function () {\n        };\n        var script = null;\n        script = document.createElement('script');\n        script.id = fileName.replace(/[\\./]+/g, '-');\n        script.type = 'text/javascript';\n        script.src = fileName;\n        script.onload = function () {\n            loadFiles.js.push(fileName);\n            callback();\n        };\n        if (into === 'head') {\n            document.getElementsByTagName('head')[0].appendChild(script);\n        } else {\n            document.body.appendChild(script);\n        }\n    }\n\n    /**\n     * 动态加载CSS文件的方法\n     * Load css file method\n     *\n     * @param {String}   fileName              CSS文件名\n     * @param {Function} [callback=function()] 加载成功后执行的回调函数\n     * @param {String}   [into='head']         嵌入页面的位置\n     */\n    function loadCSS(fileName, callback, into) {\n        into = into || 'head';\n        callback = callback || function () {\n        };\n\n        var css = document.createElement('link');\n        css.type = 'text/css';\n        css.rel = 'stylesheet';\n        css.onload = css.onreadystatechange = function () {\n            loadFiles.css.push(fileName);\n            callback();\n        };\n        css.href = fileName;\n        if (into === 'head') {\n            document.getElementsByTagName('head')[0].appendChild(css);\n        } else {\n            document.body.appendChild(css);\n        }\n    }\n\n    $(document).ready(function () {\n        /**\n         * 回到顶部\n         */\n        var returnTop = $('#return-to-top');\n        $(window).scroll(function () {\n            if ($(this).scrollTop() >= 50) {\n                returnTop.fadeIn(200);\n            } else {\n                returnTop.fadeOut(200);\n            }\n        });\n        returnTop.click(function () {\n            $('body,html').animate(\n                {\n                    scrollTop: 0\n                },\n                500\n            );\n        });\n\n        //百度推送\n        var bp = document.createElement('script');\n        var curProtocol = window.location.protocol.split(':')[0];\n        if (curProtocol === 'https') {\n            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';\n        } else {\n            bp.src = 'http://push.zhanzhang.baidu.com/push.js';\n        }\n        var bdPush = document.getElementsByTagName('script')[0];\n        bdPush.parentNode.insertBefore(bp, bdPush);\n\n        //百度统计\n        var hm = document.createElement('script');\n        hm.src = 'https://hm.baidu.com/hm.js?37d3bf3116f041cb10bd1d890e65bcfc';\n        var bdhmt = document.getElementsByTagName('script')[0];\n        bdhmt.parentNode.insertBefore(hm, bdhmt);\n\n        //valine评论支持\n        loadScript(\n            '//cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js',\n            function () {\n                loadScript(\n                    '//cdn.jsdelivr.net/wp/plugins/wp-editormd/tags/valine/1.1.7/Valine.min.js',\n                    function () {\n                        if (document.getElementById('vcomments') !== null) {\n                            new Valine({\n                                av: AV,\n                                el: '#vcomments',\n                                emoticon_url: 'https://cdn.jsdelivr.net/wp/plugins/wp-editormd/tags/valine/alu',\n                                emoticon_list: [\n                                    '吐.png',\n                                    '喷血.png',\n                                    '狂汗.png',\n                                    '不说话.png',\n                                    '汗.png',\n                                    '坐等.png',\n                                    '献花.png',\n                                    '不高兴.png',\n                                    '中刀.png',\n                                    '害羞.png',\n                                    '皱眉.png',\n                                    '小眼睛.png',\n                                    '中指.png',\n                                    '尴尬.png',\n                                    '瞅你.png',\n                                    '想一想.png',\n                                    '中枪.png',\n                                    '得意.png',\n                                    '肿包.png',\n                                    '扇耳光.png',\n                                    '亲亲.png',\n                                    '惊喜.png',\n                                    '脸红.png',\n                                    '无所谓.png',\n                                    '便便.png',\n                                    '愤怒.png',\n                                    '蜡烛.png',\n                                    '献黄瓜.png',\n                                    '内伤.png',\n                                    '投降.png',\n                                    '观察.png',\n                                    '看不见.png',\n                                    '击掌.png',\n                                    '抠鼻.png',\n                                    '邪恶.png',\n                                    '看热闹.png',\n                                    '口水.png',\n                                    '抽烟.png',\n                                    '锁眉.png',\n                                    '装大款.png',\n                                    '吐舌.png',\n                                    '无奈.png',\n                                    '长草.png',\n                                    '赞一个.png',\n                                    '呲牙.png',\n                                    '无语.png',\n                                    '阴暗.png',\n                                    '不出所料.png',\n                                    '咽气.png',\n                                    '期待.png',\n                                    '高兴.png',\n                                    '吐血倒地.png',\n                                    '哭泣.png',\n                                    '欢呼.png',\n                                    '黑线.png',\n                                    '喜极而泣.png',\n                                    '喷水.png',\n                                    '深思.png',\n                                    '鼓掌.png',\n                                    '暗地观察.png'\n                                ],\n                                appId: 'rEDT0uBB2LEdndoJ4od2SlKf-gzGzoHsz',\n                                appKey: 'lmX57j7hrYGCHROA72tBUIXq',\n                                notify: false,\n                                verify: false,\n                                avatar: 'mm',\n                                placeholder: '欢迎评论！'\n                            });\n                        }\n                    }\n                );\n            }\n        );\n        //图箱支持\n        loadScript('//cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js', function () {\n                mediumZoom(document.querySelectorAll('.post-full-content .post-content img'));\n            }\n        );\n        //Prism高亮支持\n        loadCSS('//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism-tomorrow.min.css');\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js', function () {\n            loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js', function () {\n                    //将html代码块支持高亮\n                    $('.post-content pre code').attr('class', function (i, clazz) {\n                        if (clazz !== undefined) {\n                            return clazz.replace(/language-html/g, 'language-markup');\n                        }\n                    });\n                    //设置高亮语言样式文件地址\n                    if (window.Prism !== 'undefined') {\n                        Prism.plugins.autoloader.languages_path = '//cdn.jsdelivr.net/npm/prismjs/components/';\n                        Prism.highlightAll();\n                    }\n                }\n            );\n        });\n        //行号\n        loadCSS('//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css');\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js');\n        //支持行号显示\n        $('.post-content pre').addClass('line-numbers');\n        //显示语言或者粘贴\n        loadCSS('//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css');\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js');\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js');\n        loadScript('//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js');\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js');\n\n        console.log('已经动态加载资源：', loadFiles);\n    });\n})(jQuery);\n"]}