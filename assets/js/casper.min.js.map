{"version":3,"sources":["casper.js"],"names":["$","loadFiles","js","css","click","addClass","removeClass","window","location","hash","checkExist","setInterval","length","animate","scrollTop","offset","top","clearInterval","loadScript","fileName","callback","into","script","document","createElement","id","replace","type","src","onload","push","getElementsByTagName","appendChild","body","loadCSS","rel","onreadystatechange","href","ready","returnTop","scroll","this","fadeIn","fadeOut","bp","curProtocol","protocol","split","bdPush","parentNode","insertBefore","hm","bdhmt","getElementById","Valine","av","AV","el","emoticon_url","emoticon_list","appId","appKey","notify","verify","avatar","placeholder","mediumZoom","querySelectorAll","attr","i","clazz","undefined","Prism","plugins","autoloader","languages_path","highlightAll","GhostSearch","key","host","focus","blur","console","log","jQuery"],"mappings":"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","file":"casper.min.js","sourcesContent":["(function ($) {\r\n    var loadFiles = {\r\n        js: [],\r\n        css: []\r\n    };\r\n\r\n    /**\r\n     * 打开捐赠弹窗\r\n     */\r\n    $('#btn-modal').click(function () {\r\n        $('#overlay').addClass('is-visible');\r\n        $('#modal').addClass('is-visible animated fadeInDown').removeClass('fadeOutDown');\r\n        $('html').css('overflow-y', 'hidden');\r\n    });\r\n    /**\r\n     * 关闭捐赠弹窗\r\n     */\r\n    $('#close-btn').click(function () {\r\n        $('#overlay').removeClass('is-visible');\r\n        $('#modal').removeClass('is-visible animated fadeInDown').addClass('animated fadeOutDown');\r\n        $('html').css('overflow-y', 'scroll');\r\n    });\r\n    $('#overlay').click(function () {\r\n        $('#overlay').removeClass('is-visible');\r\n        $('#modal').removeClass('is-visible animated fadeInDown').addClass('animated fadeOutDown');\r\n        $('html').css('overflow-y', 'scroll');\r\n    });\r\n\r\n    /**\r\n     * 评论跳转\r\n     */\r\n    if (window.location.hash) {\r\n        var checkExist = setInterval(function () {\r\n            if ($(window.location.hash).length) {\r\n                $('html, body').animate(\r\n                    {scrollTop: $(window.location.hash).offset().top - 90},\r\n                    1000\r\n                );\r\n                clearInterval(checkExist);\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    /**\r\n     * 时间转换\r\n     * @param timestamp\r\n     * @returns {string}\r\n     */\r\n    function timestampFormat(timestamp) {\r\n        timestamp = Date.parse(timestamp) / 1000;\r\n\r\n        function zeroize(num) {\r\n            return (String(num).length === 1 ? '0' : '') + num;\r\n        }\r\n\r\n        var curTimestamp = parseInt(new Date().getTime() / 1000); //当前时间戳\r\n        var timestampDiff = curTimestamp - timestamp; // 参数时间戳与当前时间戳相差秒数\r\n        var curDate = new Date(curTimestamp * 1000); // 当前时间日期对象\r\n        var tmDate = new Date(timestamp * 1000); // 参数时间戳转换成的日期对象\r\n        var Y = tmDate.getFullYear(),\r\n            m = tmDate.getMonth() + 1,\r\n            d = tmDate.getDate();\r\n        var H = tmDate.getHours(),\r\n            i = tmDate.getMinutes(),\r\n            s = tmDate.getSeconds();\r\n        if (timestampDiff < 60) {\r\n            // 一分钟以内\r\n            return '刚刚';\r\n        } else if (timestampDiff < 3600) {\r\n            // 一小时前之内\r\n            return Math.floor(timestampDiff / 60) + '分钟前';\r\n        } else if (\r\n            curDate.getFullYear() === Y &&\r\n            curDate.getMonth() + 1 === m &&\r\n            curDate.getDate() === d\r\n        ) {\r\n            return '今天' + zeroize(H) + ':' + zeroize(i);\r\n        } else {\r\n            var newDate = new Date((curTimestamp - 86400) * 1000); // 参数中的时间戳加一天转换成的日期对象\r\n            if (\r\n                newDate.getFullYear() === Y &&\r\n                newDate.getMonth() + 1 === m &&\r\n                newDate.getDate() === d\r\n            ) {\r\n                return '昨天' + zeroize(H) + ':' + zeroize(i);\r\n            } else if (curDate.getFullYear() === Y) {\r\n                return (\r\n                    zeroize(m) + '月' + zeroize(d) + '日 ' + zeroize(H) + ':' + zeroize(i)\r\n                );\r\n            } else {\r\n                return (\r\n                    Y +\r\n                    '年' +\r\n                    zeroize(m) +\r\n                    '月' +\r\n                    zeroize(d) +\r\n                    '日 ' +\r\n                    zeroize(H) +\r\n                    ':' +\r\n                    zeroize(i)\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 动态加载JS文件的方法\r\n     * Load javascript file method\r\n     *\r\n     * @param {String}   fileName              JS文件名\r\n     * @param {Function} [callback=function()] 加载成功后执行的回调函数\r\n     * @param {String}   [into='head']         嵌入页面的位置\r\n     */\r\n    function loadScript(fileName, callback, into) {\r\n        into = into || 'body';\r\n        callback = callback || function () {\r\n        };\r\n        var script = null;\r\n        script = document.createElement('script');\r\n        script.id = fileName.replace(/[\\./]+/g, '-');\r\n        script.type = 'text/javascript';\r\n        script.src = fileName;\r\n        script.onload = function () {\r\n            loadFiles.js.push(fileName);\r\n            callback();\r\n        };\r\n        if (into === 'head') {\r\n            document.getElementsByTagName('head')[0].appendChild(script);\r\n        } else {\r\n            document.body.appendChild(script);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 动态加载CSS文件的方法\r\n     * Load css file method\r\n     *\r\n     * @param {String}   fileName              CSS文件名\r\n     * @param {Function} [callback=function()] 加载成功后执行的回调函数\r\n     * @param {String}   [into='head']         嵌入页面的位置\r\n     */\r\n    function loadCSS(fileName, callback, into) {\r\n        into = into || 'head';\r\n        callback = callback || function () {\r\n        };\r\n\r\n        var css = document.createElement('link');\r\n        css.type = 'text/css';\r\n        css.rel = 'stylesheet';\r\n        css.onload = css.onreadystatechange = function () {\r\n            loadFiles.css.push(fileName);\r\n            callback();\r\n        };\r\n        css.href = fileName;\r\n        if (into === 'head') {\r\n            document.getElementsByTagName('head')[0].appendChild(css);\r\n        } else {\r\n            document.body.appendChild(css);\r\n        }\r\n    }\r\n\r\n    $(document).ready(function () {\r\n        /**\r\n         * 回到顶部\r\n         */\r\n        var returnTop = $('#return-to-top');\r\n        $(window).scroll(function () {\r\n            if ($(this).scrollTop() >= 50) {\r\n                returnTop.fadeIn(200);\r\n            } else {\r\n                returnTop.fadeOut(200);\r\n            }\r\n        });\r\n        returnTop.click(function () {\r\n            $('body,html').animate(\r\n                {\r\n                    scrollTop: 0\r\n                },\r\n                500\r\n            );\r\n        });\r\n\r\n        //百度推送\r\n        var bp = document.createElement('script');\r\n        var curProtocol = window.location.protocol.split(':')[0];\r\n        if (curProtocol === 'https') {\r\n            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';\r\n        } else {\r\n            bp.src = 'http://push.zhanzhang.baidu.com/push.js';\r\n        }\r\n        var bdPush = document.getElementsByTagName('script')[0];\r\n        bdPush.parentNode.insertBefore(bp, bdPush);\r\n\r\n        //百度统计\r\n        var hm = document.createElement('script');\r\n        hm.src = 'https://hm.baidu.com/hm.js?37d3bf3116f041cb10bd1d890e65bcfc';\r\n        var bdhmt = document.getElementsByTagName('script')[0];\r\n        bdhmt.parentNode.insertBefore(hm, bdhmt);\r\n\r\n        //valine评论支持\r\n        loadScript(\r\n            '//cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js',\r\n            function () {\r\n                loadScript(\r\n                    '//cdn.jsdelivr.net/wp/plugins/wp-editormd/tags/valine/1.1.7/Valine.min.js',\r\n                    function () {\r\n                        if (document.getElementById('vcomments') !== null) {\r\n                            new Valine({\r\n                                av: AV,\r\n                                el: '#vcomments',\r\n                                emoticon_url: 'https://cdn.jsdelivr.net/wp/plugins/wp-editormd/tags/valine/alu',\r\n                                emoticon_list: [\r\n                                    '吐.png',\r\n                                    '喷血.png',\r\n                                    '狂汗.png',\r\n                                    '不说话.png',\r\n                                    '汗.png',\r\n                                    '坐等.png',\r\n                                    '献花.png',\r\n                                    '不高兴.png',\r\n                                    '中刀.png',\r\n                                    '害羞.png',\r\n                                    '皱眉.png',\r\n                                    '小眼睛.png',\r\n                                    '中指.png',\r\n                                    '尴尬.png',\r\n                                    '瞅你.png',\r\n                                    '想一想.png',\r\n                                    '中枪.png',\r\n                                    '得意.png',\r\n                                    '肿包.png',\r\n                                    '扇耳光.png',\r\n                                    '亲亲.png',\r\n                                    '惊喜.png',\r\n                                    '脸红.png',\r\n                                    '无所谓.png',\r\n                                    '便便.png',\r\n                                    '愤怒.png',\r\n                                    '蜡烛.png',\r\n                                    '献黄瓜.png',\r\n                                    '内伤.png',\r\n                                    '投降.png',\r\n                                    '观察.png',\r\n                                    '看不见.png',\r\n                                    '击掌.png',\r\n                                    '抠鼻.png',\r\n                                    '邪恶.png',\r\n                                    '看热闹.png',\r\n                                    '口水.png',\r\n                                    '抽烟.png',\r\n                                    '锁眉.png',\r\n                                    '装大款.png',\r\n                                    '吐舌.png',\r\n                                    '无奈.png',\r\n                                    '长草.png',\r\n                                    '赞一个.png',\r\n                                    '呲牙.png',\r\n                                    '无语.png',\r\n                                    '阴暗.png',\r\n                                    '不出所料.png',\r\n                                    '咽气.png',\r\n                                    '期待.png',\r\n                                    '高兴.png',\r\n                                    '吐血倒地.png',\r\n                                    '哭泣.png',\r\n                                    '欢呼.png',\r\n                                    '黑线.png',\r\n                                    '喜极而泣.png',\r\n                                    '喷水.png',\r\n                                    '深思.png',\r\n                                    '鼓掌.png',\r\n                                    '暗地观察.png'\r\n                                ],\r\n                                appId: 'rEDT0uBB2LEdndoJ4od2SlKf-gzGzoHsz',\r\n                                appKey: 'lmX57j7hrYGCHROA72tBUIXq',\r\n                                notify: false,\r\n                                verify: false,\r\n                                avatar: 'mm',\r\n                                placeholder: '欢迎评论！'\r\n                            });\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        );\r\n        //图箱支持\r\n        loadScript('//cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js', function () {\r\n                mediumZoom(document.querySelectorAll('.post-full-content .post-content img'));\r\n            }\r\n        );\r\n        //Prism高亮支持\r\n        loadCSS('//cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism-tomorrow.min.css');\r\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js', function () {\r\n            loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js', function () {\r\n                    //将html代码块支持高亮\r\n                    $('.post-content pre code').attr('class', function (i, clazz) {\r\n                        if (clazz !== undefined) {\r\n                            return clazz.replace(/language-html/g, 'language-markup');\r\n                        }\r\n                    });\r\n                    //设置高亮语言样式文件地址\r\n                    if (window.Prism !== 'undefined') {\r\n                        Prism.plugins.autoloader.languages_path = '//cdn.jsdelivr.net/npm/prismjs/components/';\r\n                        Prism.highlightAll();\r\n                    }\r\n                }\r\n            );\r\n        });\r\n        //行号\r\n        loadCSS('//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css');\r\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js');\r\n        //支持行号显示\r\n        $('.post-content pre').addClass('line-numbers');\r\n        //显示语言或者粘贴\r\n        loadCSS('//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css');\r\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js');\r\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js');\r\n        loadScript('//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js');\r\n        loadScript('//cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js');\r\n\r\n        // 配置搜索\r\n        var ghostSearch = new GhostSearch({\r\n            // key: '1c8b902ac09889962117d082e6',\r\n            // host: 'http://localhost:2368'\r\n            key: '99efee9603c92e5cd04501f069',\r\n            host: 'https://iiong.com'\r\n        });\r\n        // 搜索事件执行\r\n        $('#ghost-search-field').focus(function () {\r\n            $('#ghost-search-results').fadeIn(500);\r\n            $('.search-cover').fadeIn(500);\r\n            $('html').css('overflow-y', 'hidden')\r\n        }).blur(function () {\r\n            $('#ghost-search-results').fadeOut(500);\r\n            $('.search-cover').fadeOut(500);\r\n            $('html').css('overflow-y', 'scroll')\r\n        });\r\n        console.log('已经动态加载资源：', loadFiles);\r\n    });\r\n})(jQuery);\r\n"]}